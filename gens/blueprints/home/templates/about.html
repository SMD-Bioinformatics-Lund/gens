{% extends "layout.html" %}
{% from "navbar.html" import navbar %}

{% block title %}Gens - Version {{version}}{% endblock title %}

{% block css_style %}
    {{ super() }}
    <link rel='stylesheet' href='{{ url_for('home.static', filename='about.min.css') }}' type='text/css'>
{% endblock css_style %}

{% block body %}
  {{ navbar('about', version, current_user) }}
  {{ super() }}
{% endblock %}

{% block content %}
<div class="content">
  <div>
    <h1>About GENS</h1> 
    <p>For information on how to use Gens please see the CMD Wiki.</p>
  </div>
  <div class="card-panel">
    <div class="row">
      {{ db_info_card(timestamps) }}
    </div>
  </div>
</div>
{% endblock content %}

{% macro db_info_card(timestamps) %}
  <div id="loaded-db-data" class="card">
    <h2>Database</h2>
    <p>Information loaded into the Gens database and when they were last updated.</p>
    <div>
      {% for track in timestamps %}
        {% if timestamps[track] | length > 0 and timestamps[track][0]["name"] %}
          <h3>{{ track }}</h3>
          <ul>
            {% for annotation in timestamps[track] %}
              <li>{{ annotation["name"] }} - <span class="year">{{ annotation["timestamp"] }}</span></li>
            {% endfor %}
          </ul>
        {% else %}
          <h3>{{ track }} - <span class="year">{{ timestamps[track][0]["timestamp"] }}</span></h3>
        {% endif %}
      {% endfor %}
    </div>
  </div>
{% endmacro %}
